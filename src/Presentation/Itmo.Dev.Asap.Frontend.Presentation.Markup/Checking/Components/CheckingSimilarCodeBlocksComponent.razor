@using Itmo.Dev.Asap.Frontend.Application.Abstractions.Checking.Models

@if (CodeBlocks is not null)
{
    <MudExpansionPanel>

        <TitleContent>
            <MudStack Row="true" Justify="Justify.FlexStart" AlignItems="AlignItems.Center">

                <MudText Typo="Typo.h4">
                    @(CodeBlocks.SimilarityScore * 100)%
                </MudText>

            </MudStack>
        </TitleContent>

        <ChildContent>
            <MudStack Row="true" Justify="Justify.SpaceBetween">

                <MudStack Style="width: 50%">
                    @foreach (var codeBlock in CodeBlocks.First)
                    {
                        <CodeBlockComponent CodeBlock="codeBlock"/>
                    }
                </MudStack>

                <MudStack Style="width: 50%">
                    @foreach (var codeBlock in CodeBlocks.Second)
                    {
                        <CodeBlockComponent CodeBlock="codeBlock"/>
                    }
                </MudStack>

            </MudStack>
        </ChildContent>

    </MudExpansionPanel>
}

@code {

    [Parameter]
    public CheckingSimilarCodeBlocks? CodeBlocks { get; set; }

    private static string ToDisplayString(CheckingCodeBlock codeBlock)
        => $"{codeBlock.FilePath} ({codeBlock.LineFrom}:{codeBlock.LineTo})";

}